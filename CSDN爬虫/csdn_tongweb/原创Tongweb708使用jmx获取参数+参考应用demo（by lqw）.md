# 原创Tongweb708使用jmx获取参数+参考应用demo（by lqw）

> 原文地址: https://blog.csdn.net/weixin_39938069/article/details/152000422

---

前提
1.已顺利安装好Tongweb708，并顺利启动了Tongweb708，能登录控制台进行操作
2.最好本地准备好jdk，方便用jconsole测试。
相关配置
开启远程jmx
找到该位置，开启远程jmx，配置服务器ip，jmx连接端口号，打开支持jconsole的开关，点击更新或保存。
配置启动参数
-Dcom.sun.management.jmxremote
=
true
-Dcom.sun.management.jmxremote.ssl
=
false
-Dcom.sun.management.jmxremote.authenticate
=
false
-Djava.rmi.server.hostname
=
监控IP
备注：
1.监控ip换成你的本机ip，不要用127.0.0.1
可以通过控制台进行配置：
也可以配置到tongweb.xml下（前提是得关了文件防篡改，否则需要关闭tongweb，记得备份好你的tongweb.xml）：
<
arg
changeToArg
=
""
desc
=
""
enabled
=
"true"
name
=
"-Dcom.sun.management.jmxremote=true"
onlyForLinux
=
"false"
supportedJRE
=
""
/
>
<
arg
changeToArg
=
""
desc
=
""
enabled
=
"true"
name
=
"-Dcom.sun.management.jmxremote.ssl=false"
onlyForLinux
=
"false"
supportedJRE
=
""
/
>
<
arg
changeToArg
=
""
desc
=
""
enabled
=
"true"
name
=
"-Dcom.sun.management.jmxremote.authenticate=false"
onlyForLinux
=
"false"
supportedJRE
=
""
/
>
<
arg
changeToArg
=
""
desc
=
""
enabled
=
"true"
name
=
"-Djava.rmi.server.hostname=192.168.10.123"
onlyForLinux
=
"false"
supportedJRE
=
""
/
>
配置监控用户密码
可通过控制台操作。
重启tongweb并获取jmx连接url
重启tongweb，然后查看启动日志，找到这个信息：
使用jconsole验证
window本地打开你的jdk目录，找到该文件，双击运行：
填入相关信息（包括日志里看到的jmx的连接url，前面配的账号密码）：
点击连接，遇到提示不安全的ssl连接，直接点不安全的连接：
连接成功后，会有页面加载，包括mbean，如下所示：
部署参考demo
首先找到示范demo的war，路径在versionxxx/examples下：
填好应用名和部署路径（即war包所在的路径，例如：/opt/TongWeb7.0.8.905/version7.0.8.905/examples/examples.war），然后点添加：
部署成功后，点击连接进行访问：
点击最下面的jmx&resetapi：
参考demo的示范使用
ip：服务器ip
端口：7200（jmx配置端口）
用户：minnor
密码：minnor的密码，在控制台配置
模块：host
操作：list
填写好后，点击生成jmx代码，然后执行，可以看到有结果：
代码原理和参数的参考指引
首先我们关注一下生成的jmx代码里的这个片段：
其实就是用的jconsole显示的mbean的这个部分：
继续看代码：
这里的参数，正好对应的TongWeb_V7.0.8命令行工具的内容，如下所示：
打个比方，截图显示的model下，有个app的参数，对应的action为access，add，delete，list，monitor，show，start，stop等：
我们往下拉，找到9.3应用这里：
我们拿list来测一下，在jmx的测试demo里输入app和list，然后看看生成的jmx的代码的执行结果：
可以看到执行结果和手册里的参数名能对得上：
所以可以借助这个demo，参考命令行来测试所有你想获取的jmx参数